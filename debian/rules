#!/usr/bin/make -f

%:
	dh $@

override_dh_auto_build:
	@echo "Nothing to build (noarch Python)"

override_dh_auto_install:
	# Base package: ionis-training
	install -d $(CURDIR)/debian/ionis-training/usr/share/ionis-training/scripts
	install -d $(CURDIR)/debian/ionis-training/usr/share/ionis-training/models
	install -m 644 scripts/*.py $(CURDIR)/debian/ionis-training/usr/share/ionis-training/scripts/
	install -m 644 Modelfile $(CURDIR)/debian/ionis-training/usr/share/ionis-training/
	# Validate subpackage: ionis-training-validate
	install -d $(CURDIR)/debian/ionis-training-validate/usr/bin
	install -d $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v20/tests
	install -m 755 bin/ionis-validate $(CURDIR)/debian/ionis-training-validate/usr/bin/
	install -m 644 versions/v20/model.py $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v20/
	install -m 644 versions/v20/config_v20.json $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v20/
	install -m 644 versions/v20/ionis_v20.safetensors $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v20/
	install -m 644 versions/v20/ionis_v20_meta.json $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v20/
	install -m 644 versions/v20/tests/*.py $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v20/tests/
	install -m 644 requirements-validate.txt $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/

override_dh_auto_test:
	@echo "Tests require PyTorch - skipped during package build"
