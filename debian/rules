#!/usr/bin/make -f

%:
	dh $@

override_dh_auto_build:
	@echo "Nothing to build (noarch Python)"

override_dh_auto_install:
	# Base package: ionis-training
	install -d $(CURDIR)/debian/ionis-training/usr/share/ionis-training/scripts
	install -d $(CURDIR)/debian/ionis-training/usr/share/ionis-training/models
	install -m 644 scripts/*.py $(CURDIR)/debian/ionis-training/usr/share/ionis-training/scripts/
	# Validate subpackage: ionis-training-validate
	install -d $(CURDIR)/debian/ionis-training-validate/usr/bin
	install -d $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v22/tests
	install -m 755 bin/ionis-validate $(CURDIR)/debian/ionis-training-validate/usr/bin/
	install -m 644 versions/v22/model.py $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v22/
	install -m 644 versions/v22/physics_override.py $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v22/
	install -m 644 versions/v22/config_v22.json $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v22/
	install -m 644 versions/v22/ionis_v22_gamma.safetensors $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v22/
	install -m 644 versions/v22/ionis_v22_gamma_meta.json $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v22/
	install -m 644 versions/v22/tests/*.py $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v22/tests/
	install -m 644 versions/v22/tests/ki7mt_test_paths.json $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/versions/v22/tests/
	install -m 644 requirements-validate.txt $(CURDIR)/debian/ionis-training-validate/usr/share/ionis-training/

override_dh_auto_test:
	@echo "Tests require PyTorch - skipped during package build"
